<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Otho | Sidenotes on Otho | Sidenotes</title>
    <link>/</link>
    <description>Recent content in Otho | Sidenotes on Otho | Sidenotes</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; Otho Mantegazza 2018</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0200</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Show Absolute and Percent Change in a Time Series</title>
      <link>/post/2019-02-02-butter-consumption/</link>
      <pubDate>Sat, 02 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>/post/2019-02-02-butter-consumption/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#load-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; Load Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#get-the-data&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; Get the data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#wrangle-and-estimate-percentage-changes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Wrangle and Estimate Percentage Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#a-bit-of-style&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; A bit of style&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#plotting-aka-the-fun-part&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; Plotting (aka the fun part ;) )&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#set-the-basic-aesthetic-mapping&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; Set the basic aesthetic mapping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#add-the-first-geometric-objects&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.2&lt;/span&gt; Add the first geometric objects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#specify-percent-changes-explicitly&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.3&lt;/span&gt; Specify percent changes explicitly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#colors-colors-colors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.4&lt;/span&gt; Colors colors colors&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#title-axis-and-caption&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.5&lt;/span&gt; Title axis and caption&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#automate-with-a-function&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;6&lt;/span&gt; Automate With a Function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#waterfall-charts&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;7&lt;/span&gt; Waterfall charts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#this-post-will-be-updated&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;8&lt;/span&gt; This Post will be updated&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;Here I’ll show, you step by step, how to produce the plot in the tweet below. You can use it to show explicitly (and redundantly, but this is not always bad) absolute and relative changes among points in a time series.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
Late &lt;a href=&#34;https://twitter.com/hashtag/TidyTuesday?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#TidyTuesday&lt;/a&gt; , &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt;&lt;br&gt;&lt;br&gt;Visualization practice, I&#39;m showing consumption of butter and its percent change compared to the previous year.&lt;br&gt;&lt;br&gt;I did this plot on “butter” just because its consumption changes.&lt;br&gt;&lt;br&gt;Source: &lt;a href=&#34;https://t.co/yNp2qkOVO5&#34;&gt;https://t.co/yNp2qkOVO5&lt;/a&gt;&lt;br&gt;Code: &lt;a href=&#34;https://t.co/flNedKO1kh&#34;&gt;https://t.co/flNedKO1kh&lt;/a&gt; &lt;a href=&#34;https://t.co/yoTHspwBxZ&#34;&gt;pic.twitter.com/yoTHspwBxZ&lt;/a&gt;
&lt;/p&gt;
— Otho (&lt;span class=&#34;citation&#34;&gt;@othomn&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/othomn/status/1091413719320547328?ref_src=twsrc%5Etfw&#34;&gt;February 1, 2019&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;To produce this plot, you just need to mix components from &lt;code&gt;ggplot2&lt;/code&gt;, and the wonderful &lt;code&gt;scico&lt;/code&gt; colour palette.&lt;/p&gt;
&lt;div id=&#34;load-packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; Load Packages&lt;/h1&gt;
&lt;p&gt;First you need to load the required R packages.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(tibbletime)
library(scico)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;tidyverse&lt;/code&gt; is a collection of packages for data analysis, that contains the functions that we will use to load, manipulate and plot the data.&lt;/p&gt;
&lt;p&gt;The package &lt;code&gt;tibbletime&lt;/code&gt; stores the function &lt;code&gt;rollify&lt;/code&gt;. This function allows you to apply another function, such as &lt;code&gt;mean&lt;/code&gt; or &lt;code&gt;sum&lt;/code&gt; over windows of time, or, as the name says, to “roll”&amp;quot; it.&lt;/p&gt;
&lt;p&gt;The package scico stores wonderful color palettes, but more about that later.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;get-the-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; Get the data&lt;/h1&gt;
&lt;p&gt;I use this snippet of code to download data automatically and only once.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Get data Milk products ---------------------------------------------------

dat_path &amp;lt;- &amp;quot;_data/2-05-milk-product-facts.Rdata&amp;quot;
dat_url &amp;lt;- paste0(&amp;quot;https://raw.githubusercontent.com/&amp;quot;,
                  &amp;quot;rfordatascience/tidytuesday/master/data/&amp;quot;,
                  &amp;quot;2019/2019-01-29/milk_products_facts.csv&amp;quot;)

if(!file.exists(dat_path)) {
  dat_milkprods &amp;lt;- 
    read_csv(dat_url)
  
  save(dat_milkprods, file = dat_path)
  
} else {
  load(dat_path)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The original data come from USDA, but this version has been already tidied by Thomas Mock as part of the of the &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday&#34;&gt;TidyTuesday&lt;/a&gt;, a weekly social data project that he organizes. So we have little data manipulation left to do.&lt;/p&gt;
&lt;p&gt;The milkprods dataset is already tidy, but it stores many columns that we don’t need.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat_milkprods %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 43 x 18
##     year fluid_milk fluid_yogurt butter cheese_american cheese_other
##    &amp;lt;int&amp;gt;      &amp;lt;int&amp;gt;        &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;        &amp;lt;dbl&amp;gt;
##  1  1975        247         1.97   4.73            8.15         6.13
##  2  1976        247         2.13   4.31            8.88         6.63
##  3  1977        244         2.34   4.29            9.21         6.78
##  4  1978        241         2.45   4.35            9.53         7.31
##  5  1979        238         2.44   4.49            9.60         7.57
##  6  1980        234         2.50   4.47            9.62         7.90
##  7  1981        230         2.44   4.24           10.2          8.03
##  8  1982        224         2.58   4.35           11.3          8.60
##  9  1983        223         3.16   4.91           11.6          8.96
## 10  1984        224         3.55   4.98           11.9          9.62
## # ... with 33 more rows, and 12 more variables: cheese_cottage &amp;lt;dbl&amp;gt;,
## #   evap_cnd_canned_whole_milk &amp;lt;dbl&amp;gt;, evap_cnd_bulk_whole_milk &amp;lt;dbl&amp;gt;,
## #   evap_cnd_bulk_and_can_skim_milk &amp;lt;dbl&amp;gt;, frozen_ice_cream_regular &amp;lt;dbl&amp;gt;,
## #   frozen_ice_cream_reduced_fat &amp;lt;dbl&amp;gt;, frozen_sherbet &amp;lt;dbl&amp;gt;,
## #   frozen_other &amp;lt;dbl&amp;gt;, dry_whole_milk &amp;lt;dbl&amp;gt;, dry_nonfat_milk &amp;lt;dbl&amp;gt;,
## #   dry_buttermilk &amp;lt;dbl&amp;gt;, dry_whey &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;wrangle-and-estimate-percentage-changes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Wrangle and Estimate Percentage Changes&lt;/h1&gt;
&lt;p&gt;We need just 2 variables (&lt;code&gt;year&lt;/code&gt; and &lt;code&gt;butter&lt;/code&gt;) and we can easily extract them with &lt;code&gt;dplyr::select&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A bit more complex: we need to estimate percentage changes from the day before. This is swiftly done with rollify. We can use this &lt;a href=&#34;https://adv-r.hadley.nz/function-factories.html&#34;&gt;function factory&lt;/a&gt; to build the function &lt;code&gt;roll_percent()&lt;/code&gt;, which calculates percentage change over a column of a data frame.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Percent ---------------------------------------------------------

# roll percent over a dataframe
roll_percent &amp;lt;- rollify(.f = function(n) (n[2] - n[1])*100/n[1], 2)

dat &amp;lt;- 
  dat_milkprods %&amp;gt;%
  select(year, butter) %&amp;gt;% 
  # apply on this dataframe, on the column butter
  mutate(percent = roll_percent(butter)) %&amp;gt;% 
  filter(complete.cases(.))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So, this is the clean data frame that we use for plotting:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 42 x 3
##     year butter percent
##    &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1  1976   4.31  -8.78 
##  2  1977   4.29  -0.441
##  3  1978   4.35   1.41 
##  4  1979   4.49   3.14 
##  5  1980   4.47  -0.528
##  6  1981   4.24  -5.13 
##  7  1982   4.35   2.67 
##  8  1983   4.91  12.8  
##  9  1984   4.98   1.42 
## 10  1985   4.87  -2.09 
## # ... with 32 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;a-bit-of-style&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; A bit of style&lt;/h1&gt;
&lt;p&gt;You can set the plot styles at any time, let’s do it now.&lt;/p&gt;
&lt;p&gt;Below I modify the &lt;code&gt;theme_minimal&lt;/code&gt; from &lt;code&gt;ggplot2&lt;/code&gt; with some fonts and colours that I like. I devised and and modified this from what &lt;a href=&#34;https://kieranhealy.org/&#34;&gt;Kieran Healy&lt;/a&gt; does.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_set(
  theme_minimal() +
    theme(text = element_text(family = &amp;quot;Arial Narrow&amp;quot;,
                              colour = &amp;quot;grey40&amp;quot;,
                              size = 11),
          axis.title = element_text(size = 14),
          plot.title = element_text(colour = &amp;quot;grey20&amp;quot;,
                                    face = &amp;quot;bold&amp;quot;,
                                    size = 18),
          plot.subtitle = element_text(face = &amp;quot;bold&amp;quot;,
                                       size = 12),
          aspect.ratio = .6,   
          plot.margin = margin(t = 10, r = 15, b = 0, l = 10,
                               unit = &amp;quot;mm&amp;quot;))
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can see setting a theme with &lt;code&gt;theme_set()&lt;/code&gt; in ggplot2 as if you where applying a CSS file to your website. All plots below will be produced according to this theme.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plotting-aka-the-fun-part&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; Plotting (aka the fun part ;) )&lt;/h1&gt;
&lt;p&gt;Obviously, we will produce this plot with &lt;code&gt;ggplot2&lt;/code&gt;.&lt;/p&gt;
&lt;div id=&#34;set-the-basic-aesthetic-mapping&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; Set the basic aesthetic mapping&lt;/h2&gt;
&lt;p&gt;First you can set the basic aesthetic mapping. All elements of the plot will have the variable &lt;code&gt;year&lt;/code&gt; mapped to the x axis and &lt;code&gt;butter&lt;/code&gt; mapped to the y axis.&lt;/p&gt;
&lt;p&gt;Below, I also use a small dplyr trick to setting the &lt;code&gt;yend&lt;/code&gt; variable, just before plotting. This variable doesn’t add anything to the dataset and I just need it when I plot the percentage changes, to make them look nice and clear.&lt;/p&gt;
&lt;p&gt;With the &lt;code&gt;tidyverse&lt;/code&gt; and &lt;code&gt;ggplot2&lt;/code&gt; you have at least two choices for setting variables on the fly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Right before plotting, in a pipe, as I’m doing here.&lt;/li&gt;
&lt;li&gt;Directly within &lt;code&gt;ggplot2&lt;/code&gt; when you define the aesthetic mapping, as I will do later.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  dat %&amp;gt;% 
  mutate(yend = butter + (percent/10)) %&amp;gt;% 
  ggplot(aes(x = year,
             y = butter))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;At this point I’ve mapped basic aesthetic to the plot, but I did not specify any geometric object: this the plot is empty.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;add-the-first-geometric-objects&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.2&lt;/span&gt; Add the first geometric objects&lt;/h2&gt;
&lt;p&gt;I’ll start with the grey annotation square, and the text, just because I want them to appear below any other object of the plot.&lt;/p&gt;
&lt;p&gt;Then I add the key geometric elements, &lt;strong&gt;the points&lt;/strong&gt;, that are mapped to the absolute value of the butter sold in the US (lbs per person) and &lt;strong&gt;the arrows&lt;/strong&gt; that are mapped to the percentage changes.&lt;/p&gt;
&lt;p&gt;Note: you can call &lt;code&gt;aes()&lt;/code&gt; inside a call for a geometric object, as I do for &lt;code&gt;geom_point()&lt;/code&gt;. In this way you can map a variable to an aesthetic parameter exclusively for that geometric object.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  p +
  # First the annotations
  annotate(geom = &amp;quot;rect&amp;quot;,
           xmin = 2008, xmax = 2010,
           ymin = -Inf, ymax = Inf,
           fill = &amp;quot;grey80&amp;quot;, alpha = .5) +
  annotate(geom = &amp;quot;text&amp;quot;,
           x = 2009, y = 4,
           label = &amp;quot;2008\nEconomic Crisis?&amp;quot;,
           family = &amp;quot;Arial Narrow&amp;quot;,
           colour = &amp;quot;grey40&amp;quot;,
           size = 3, fontface = &amp;quot;bold&amp;quot;) +
  # and then the basic geometric objects
  geom_segment(aes(yend = yend,
                   xend = ..x..,
                   colour = percent),
               size = 2,
               arrow = arrow(length = unit(1.2, &amp;quot;mm&amp;quot;),
                             type = &amp;quot;closed&amp;quot;)) +
  geom_point(colour = &amp;quot;grey40&amp;quot;, size = 2)

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;specify-percent-changes-explicitly&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.3&lt;/span&gt; Specify percent changes explicitly&lt;/h2&gt;
&lt;p&gt;We can specify percent changes explicitly with numbers, in this way, readers can learn the specific size of the effect easily.&lt;/p&gt;
&lt;p&gt;I’ll do it with &lt;code&gt;geom_text()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The numbers must appear above the arrow if the percentage change is positive, and, below, if it is negative. We achieve this using &lt;code&gt;case_when()&lt;/code&gt;: a vectorized ifelse statement. I use &lt;code&gt;case_when()&lt;/code&gt; directly in the call to the aesthetic mapping.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  p +
  geom_text(aes(y = case_when(percent &amp;gt; 0 ~ yend + .12,
                              TRUE ~ yend - .12),
                label = percent %&amp;gt;% 
                  round() %&amp;gt;% paste0(&amp;quot;%&amp;quot;),
                colour = percent),
            size = 2.7)

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colors-colors-colors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.4&lt;/span&gt; Colors colors colors&lt;/h2&gt;
&lt;p&gt;Colors: are they necessary? Are they to be avoided? The debate on what is the best way to use colors in a graph is wide and, well, colorful (forgive me ;) ). Well, colors, they make your plot look good, and for sure they can be helpful. How can we get the most out of them.&lt;/p&gt;
&lt;p&gt;Beside looking good, a colour palette today must have two properties:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Be colour blind friendly (no need to explain this),&lt;/li&gt;
&lt;li&gt;Be perceptively uniform, or at least perceptively reasonable (i.e. it should not let you guess pattern that are not in the data).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The concept of perceptively uniform is explained clearly in the &lt;a href=&#34;https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html&#34;&gt;vignette of the viridis package&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Beside the beautiful viridis palette, I also love those in the &lt;a href=&#34;https://www.data-imaginist.com/2018/scico-and-the-colour-conundrum/&#34;&gt;package scico&lt;/a&gt;. This package was developed by &lt;a href=&#34;https://www.data-imaginist.com/&#34;&gt;Thomas Lin Pedersen&lt;/a&gt; and it ports into R the color palettes developed by &lt;a href=&#34;http://www.fabiocrameri.ch/colourmaps.php&#34;&gt;Fabio Crameri&lt;/a&gt;. I use the &lt;code&gt;roma&lt;/code&gt; scale, which is divergent and colorful, and map percent change to it.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# the roma palette
scico::scico_palette_show(palettes = &amp;quot;roma&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I want the light and clear center of the divergent palette to be mapped to the 0% changes, so that the negative changes are red and the positive ones are blue. But percentage changes are not equally distributed around zero (since they are hopefully not random) so we can do it manually by setting artificial upper and lower limits to the colour mapping that are equally distant from zero.&lt;/p&gt;
&lt;p&gt;After doing that we can set the new color palette to the plot with the &lt;code&gt;scale_colour_scico()&lt;/code&gt; function. Note that I have removed the lateral color guide with &lt;code&gt;guide = FALSE&lt;/code&gt;, because it is not needed. In this way I free some space on the plot canvas.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# a limit that centers the divergent palette

lim &amp;lt;- 
  dat$percent %&amp;gt;% 
  range() %&amp;gt;% 
  abs() %&amp;gt;% 
  max()

p &amp;lt;- 
  p  +
  scale_colour_scico(palette = &amp;quot;roma&amp;quot;,
                     direction = 1,
                     limits = c(-lim, lim),
                     guide = FALSE)

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;title-axis-and-caption&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.5&lt;/span&gt; Title axis and caption&lt;/h2&gt;
&lt;p&gt;After that it’s just a matter of adding a title, a description, a caption and better labels for the axes.&lt;/p&gt;
&lt;p&gt;Note, in the original tweet I got the y axis label wrong. It should say “lbs per person”.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  p +
  labs(title = &amp;quot;Fluctuations in Butter Consumptions&amp;quot;,
       subtitle = str_wrap(&amp;quot;In the US between 1975 - 2017,
                           with weight of sold butter in lbs 
                           and its percent change compared to
                           the previous year.&amp;quot;),
       y = &amp;quot;Sold Butter in lbs per person&amp;quot;,
       x = &amp;quot;Year&amp;quot;,
       caption = &amp;quot;Data: USDA | Plot by @othomn&amp;quot;) 
p %&amp;gt;% print&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Save -----------------------------------------------------------------
  
png(filename = &amp;quot;_plots/2-05-milk.png&amp;quot;,
    height = 1600, width = 2100,
    res = 300)
p %&amp;gt;% print()
dev.off() &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## png 
##   2&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;automate-with-a-function&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;6&lt;/span&gt; Automate With a Function&lt;/h1&gt;
&lt;p&gt;We can produce this plot from the original dataset with just one line of code if we place all steps in a function. I just leave out the title and subtitle that are different for each plot&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot_arrows &amp;lt;- function(measure = butter) {
  # quote input
  measure &amp;lt;- enquo(measure)
  
  
  dat &amp;lt;- 
    dat_milkprods %&amp;gt;%
    select(year, !!measure) %&amp;gt;% 
    # apply on this dataframe, on the column butter
    mutate(percent = roll_percent(!!measure)) %&amp;gt;% 
    filter(complete.cases(.))
  
  # parameters to center the color palette
  lim &amp;lt;- 
  dat$percent %&amp;gt;% 
  range() %&amp;gt;% 
  abs() %&amp;gt;% 
  max()
  
  p &amp;lt;- 
    dat %&amp;gt;% 
    # Scale the arrow to the intensity of the measurement
    # In this way the arrow looks nice and clear in the plot
    # This step must be improved
    mutate(yend = !!measure + (percent)*(max(!!measure)/20)) %&amp;gt;% 
    ggplot(aes(x = year,
               y = !!measure)) +
    # and then the basic geometric objects
    geom_segment(aes(yend = yend,
                     xend = ..x..,
                     colour = percent),
                 size = 2,
                 arrow = arrow(length = unit(1.2, &amp;quot;mm&amp;quot;),
                               type = &amp;quot;closed&amp;quot;)) +
    geom_point(colour = &amp;quot;grey40&amp;quot;, size = 2) +
    geom_text(aes(y = case_when(percent &amp;gt; 0 ~ yend * 1.02,
                                TRUE ~ yend * 0.97),
                  label = percent %&amp;gt;% 
                    round() %&amp;gt;% paste0(&amp;quot;%&amp;quot;),
                  colour = percent),
              size = 2.7) +
    scale_colour_scico(palette = &amp;quot;roma&amp;quot;,
                       direction = 1,
                       limits = c(-lim, lim),
                       guide = FALSE)
  
  p
}

plot_arrows(fluid_milk)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot_arrows(cheese_other)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-16-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;waterfall-charts&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;7&lt;/span&gt; Waterfall charts&lt;/h1&gt;
&lt;p&gt;Last but not least, &lt;a href=&#34;https://twitter.com/EvaMaeRey&#34;&gt;Gina Reynolds&lt;/a&gt; suggested that one could misintepret the plots above, and understand that the mesurements points are at the top of the arrows instead than at the bottom.&lt;/p&gt;
&lt;p&gt;She suggested that a waterfall chart could fix this issue and provide a more direct visualization, indeed a waterfall chart does its job.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;roll_prev &amp;lt;- rollify(.f = function(n) n[1], 2)

dat &amp;lt;- 
  dat %&amp;gt;% 
  mutate(prev_year = roll_prev(butter)) %&amp;gt;% 
  filter(complete.cases(.))

half_rect &amp;lt;- .3

p &amp;lt;- 
  dat %&amp;gt;% 
  mutate(yend = butter + (percent/10)) %&amp;gt;%
  ggplot(aes(x = year,
             y = butter)) +
  annotate(geom = &amp;quot;rect&amp;quot;,
           xmin = 2008, xmax = 2010,
           ymin = -Inf, ymax = Inf,
           fill = &amp;quot;grey80&amp;quot;, alpha = .5) +
  annotate(geom = &amp;quot;text&amp;quot;,
           x = 2009, y = 4.2,
           label = &amp;quot;2008\nEconomic Crisis?&amp;quot;,
           family = &amp;quot;Arial Narrow&amp;quot;,
           colour = &amp;quot;grey40&amp;quot;,
           size = 3, fontface = &amp;quot;bold&amp;quot;) +
  # geom_line(color = &amp;quot;grey80&amp;quot;) +
  geom_rect(aes(xmin = year - half_rect,
                xmax = year + half_rect,
                ymin = prev_year,
                ymax = butter,
                colour = percent,
                fill = percent), size = 0) +
  geom_segment(aes(x = year - half_rect,
                   xend = ..x.. + 1 + half_rect*2,
                   yend = ..y..),
               colour = &amp;quot;grey40&amp;quot;, size = 1) +
  geom_text(aes(y = case_when(percent &amp;gt; 0 ~ butter + .05,
                              TRUE ~ butter - .05),
                label = percent %&amp;gt;%
                  round() %&amp;gt;% paste0(&amp;quot;%&amp;quot;),
                colour = percent),
            size = 2.7) +
  scale_colour_scico(palette = &amp;quot;roma&amp;quot;,
                     direction = 1,
                     limits = c(-lim, lim),
                     guide = FALSE) +
  scale_fill_scico(palette = &amp;quot;roma&amp;quot;,
                     direction = 1,
                     limits = c(-lim, lim),
                     guide = FALSE) +
  guides(colour = element_blank()) +
  labs(title = &amp;quot;Fluctuations in Butter Consumptions&amp;quot;,
       subtitle = str_wrap(&amp;quot;In the US between 1975 - 2017,
                           with weight of sold butter in lbs
                           and its percent change compared to
                           the previous year.&amp;quot;),
       y = &amp;quot;Sold Butter in lbs per person&amp;quot;,
       x = &amp;quot;Year&amp;quot;,
       caption = &amp;quot;Data: USDA | Plot by @othomn&amp;quot;) +
  theme_minimal() +
  theme(text = element_text(family = &amp;quot;Arial Narrow&amp;quot;,
                            colour = &amp;quot;grey40&amp;quot;,
                            size = 11),
        axis.title = element_text(size = 14),
        plot.title = element_text(colour = &amp;quot;grey20&amp;quot;,
                                  face = &amp;quot;bold&amp;quot;,
                                  size = 18),
        plot.subtitle = element_text(face = &amp;quot;bold&amp;quot;,
                                     size = 12),
        aspect.ratio = .6,   
        plot.margin = margin(t = 10, r = 15, b = 0, l = 10,
unit = &amp;quot;mm&amp;quot;))

p&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter-consumption_files/figure-html/unnamed-chunk-17-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I think that the waterfall chart indeed solves this issue, but that the version with the uses the area in the canvas differently and stresses relative changes more.&lt;/p&gt;
&lt;p&gt;So you can choose which chart to use depending on your needs. What do you think?&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;this-post-will-be-updated&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;8&lt;/span&gt; This Post will be updated&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;I would like to show this visualization on other variables of this datasets, and, as suggested by &lt;a href=&#34;https://twitter.com/EvaMaeRey&#34;&gt;Gina Reynolds&lt;/a&gt; compare it with waterfall plots.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Show Absolute and Percent Change in a Time Series</title>
      <link>/post/2019-02-02-butter.consumption/</link>
      <pubDate>Sat, 02 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>/post/2019-02-02-butter.consumption/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#load-packages&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; Load Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#get-the-data&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; Get the data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#wrangle-and-estimate-percentage-changes&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Wrangle and Estimate Percentage Changes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#a-bit-of-style&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; A bit of style&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#plotting-aka-the-fun-part&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; Plotting (aka the fun part ;) )&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#set-the-basic-aesthetic-mapping&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.1&lt;/span&gt; Set the basic aesthetic mapping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#add-the-first-geometric-objects&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.2&lt;/span&gt; Add the first geometric objects&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#specify-percent-changes-explicitly&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.3&lt;/span&gt; Specify percent changes explicitly&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#colors-colors-colors&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5.4&lt;/span&gt; Colors colors colors&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;Here I’ll show you step by step the plot in the tweet below. In this plot you can show explicitly (and redundantly, but this is not always bad) absolute and relative changes among points in a time series.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
Late &lt;a href=&#34;https://twitter.com/hashtag/TidyTuesday?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#TidyTuesday&lt;/a&gt; , &lt;a href=&#34;https://twitter.com/hashtag/dataviz?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#dataviz&lt;/a&gt;&lt;br&gt;&lt;br&gt;Visualization practice, I&#39;m showing consumption of butter and its percent change compared to the previous year.&lt;br&gt;&lt;br&gt;I did this plot on “butter” just because its consumption changes.&lt;br&gt;&lt;br&gt;Source: &lt;a href=&#34;https://t.co/yNp2qkOVO5&#34;&gt;https://t.co/yNp2qkOVO5&lt;/a&gt;&lt;br&gt;Code: &lt;a href=&#34;https://t.co/flNedKO1kh&#34;&gt;https://t.co/flNedKO1kh&lt;/a&gt; &lt;a href=&#34;https://t.co/yoTHspwBxZ&#34;&gt;pic.twitter.com/yoTHspwBxZ&lt;/a&gt;
&lt;/p&gt;
— Otho (&lt;span class=&#34;citation&#34;&gt;@othomn&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/othomn/status/1091413719320547328?ref_src=twsrc%5Etfw&#34;&gt;February 1, 2019&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;To produce this plot, you just need to mix components from &lt;code&gt;ggplot2&lt;/code&gt;, and the wonderful &lt;code&gt;scico&lt;/code&gt; colour palette.&lt;/p&gt;
&lt;div id=&#34;load-packages&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; Load Packages&lt;/h1&gt;
&lt;p&gt;First you need to load the required packages.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(tibbletime)
library(scico)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;tidyverse&lt;/code&gt; is a collection of packages for data analysis, that contains the functions that we will use to load, manipulate and plot the data.&lt;/p&gt;
&lt;p&gt;The package &lt;code&gt;tibbletime&lt;/code&gt; stores the function &lt;code&gt;rollify&lt;/code&gt;. This function allows you to apply another function, such as &lt;code&gt;mean&lt;/code&gt; or &lt;code&gt;sum&lt;/code&gt; over windows of time, or, as the name says, to “roll”&amp;quot; it.&lt;/p&gt;
&lt;p&gt;The package scico stores wonderful color palettes, but more about that later.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;get-the-data&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; Get the data&lt;/h1&gt;
&lt;p&gt;I use this snippet of code to download data automatically and only once.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Get data Milk products ---------------------------------------------------

dat_path &amp;lt;- &amp;quot;_data/2-05-milk-product-facts.Rdata&amp;quot;
dat_url &amp;lt;- paste0(&amp;quot;https://raw.githubusercontent.com/&amp;quot;,
                  &amp;quot;rfordatascience/tidytuesday/master/data/&amp;quot;,
                  &amp;quot;2019/2019-01-29/milk_products_facts.csv&amp;quot;)

if(!file.exists(dat_path)) {
  dat_milkprods &amp;lt;- 
    read_csv(dat_url)
  
  save(dat_milkprods, file = dat_path)
  
} else {
  load(dat_path)
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The original data come from USDA, but this version has been already tidied by Thomas Mock as part of the of the &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday&#34;&gt;TidyTuesday&lt;/a&gt; weekly social data project. So we have little data manipulation left to do.&lt;/p&gt;
&lt;p&gt;The milkprods dataset is already tidy, but it stores many columns that we don’t need.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat_milkprods %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 43 x 18
##     year fluid_milk fluid_yogurt butter cheese_american cheese_other
##    &amp;lt;int&amp;gt;      &amp;lt;int&amp;gt;        &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt;           &amp;lt;dbl&amp;gt;        &amp;lt;dbl&amp;gt;
##  1  1975        247         1.97   4.73            8.15         6.13
##  2  1976        247         2.13   4.31            8.88         6.63
##  3  1977        244         2.34   4.29            9.21         6.78
##  4  1978        241         2.45   4.35            9.53         7.31
##  5  1979        238         2.44   4.49            9.60         7.57
##  6  1980        234         2.50   4.47            9.62         7.90
##  7  1981        230         2.44   4.24           10.2          8.03
##  8  1982        224         2.58   4.35           11.3          8.60
##  9  1983        223         3.16   4.91           11.6          8.96
## 10  1984        224         3.55   4.98           11.9          9.62
## # ... with 33 more rows, and 12 more variables: cheese_cottage &amp;lt;dbl&amp;gt;,
## #   evap_cnd_canned_whole_milk &amp;lt;dbl&amp;gt;, evap_cnd_bulk_whole_milk &amp;lt;dbl&amp;gt;,
## #   evap_cnd_bulk_and_can_skim_milk &amp;lt;dbl&amp;gt;, frozen_ice_cream_regular &amp;lt;dbl&amp;gt;,
## #   frozen_ice_cream_reduced_fat &amp;lt;dbl&amp;gt;, frozen_sherbet &amp;lt;dbl&amp;gt;,
## #   frozen_other &amp;lt;dbl&amp;gt;, dry_whole_milk &amp;lt;dbl&amp;gt;, dry_nonfat_milk &amp;lt;dbl&amp;gt;,
## #   dry_buttermilk &amp;lt;dbl&amp;gt;, dry_whey &amp;lt;dbl&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;wrangle-and-estimate-percentage-changes&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Wrangle and Estimate Percentage Changes&lt;/h1&gt;
&lt;p&gt;We need just 2 variables and we can easily extract them with &lt;code&gt;dplyr::select&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A bit more complex: we need to estimate percentage changes from the day before. This is swiflty done with rollify. We can use this &lt;a href=&#34;https://adv-r.hadley.nz/function-factories.html&#34;&gt;function factory&lt;/a&gt; to build the function &lt;code&gt;roll_percent()&lt;/code&gt; calculates percentage change over a column of a dataframe.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Percent ---------------------------------------------------------

# roll percent over a dataframe
roll_percent &amp;lt;- rollify(.f = function(n) (n[2] - n[1])*100/n[1], 2)

dat &amp;lt;- 
  dat_milkprods %&amp;gt;%
  select(year, butter) %&amp;gt;% 
  # apply on this dataframe, on the column butter
  mutate(percent = roll_percent(butter)) %&amp;gt;% 
  filter(complete.cases(.))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So, this is the clean dataframe that we use for plotting:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 42 x 3
##     year butter percent
##    &amp;lt;int&amp;gt;  &amp;lt;dbl&amp;gt;   &amp;lt;dbl&amp;gt;
##  1  1976   4.31  -8.78 
##  2  1977   4.29  -0.441
##  3  1978   4.35   1.41 
##  4  1979   4.49   3.14 
##  5  1980   4.47  -0.528
##  6  1981   4.24  -5.13 
##  7  1982   4.35   2.67 
##  8  1983   4.91  12.8  
##  9  1984   4.98   1.42 
## 10  1985   4.87  -2.09 
## # ... with 32 more rows&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;a-bit-of-style&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; A bit of style&lt;/h1&gt;
&lt;p&gt;You can set the plot styles at any time, let’s do it now.&lt;/p&gt;
&lt;p&gt;Below I modify the &lt;code&gt;theme_minimal&lt;/code&gt; from &lt;code&gt;ggplot2&lt;/code&gt; with some fonts and colours that I like. I devised this setting and modified them from what &lt;a href=&#34;https://kieranhealy.org/&#34;&gt;Kieran Healy&lt;/a&gt; does.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_set(
  theme_minimal() +
    theme(text = element_text(family = &amp;quot;Arial Narrow&amp;quot;,
                              colour = &amp;quot;grey40&amp;quot;,
                              size = 11),
          axis.title = element_text(size = 14),
          plot.title = element_text(colour = &amp;quot;grey20&amp;quot;,
                                    face = &amp;quot;bold&amp;quot;,
                                    size = 18),
          plot.subtitle = element_text(face = &amp;quot;bold&amp;quot;,
                                       size = 12),
          aspect.ratio = .6,   
          plot.margin = margin(t = 10, r = 15, b = 0, l = 10,
                               unit = &amp;quot;mm&amp;quot;))
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;See setting the theme with &lt;code&gt;theme_set()&lt;/code&gt; in ggplot2 as if you where applying a CSS file to your website. All plots below will be produced according to this theme.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;plotting-aka-the-fun-part&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; Plotting (aka the fun part ;) )&lt;/h1&gt;
&lt;p&gt;First you can set the basic aesthetic mapping. All elements of the plot will have the variable &lt;code&gt;year&lt;/code&gt; mapped to the x axis and &lt;code&gt;butter&lt;/code&gt; mapped to the y axis.&lt;/p&gt;
&lt;div id=&#34;set-the-basic-aesthetic-mapping&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.1&lt;/span&gt; Set the basic aesthetic mapping&lt;/h2&gt;
&lt;p&gt;Below, I also use a small dplyr trick, setting the &lt;code&gt;yend&lt;/code&gt; variable, just before plotting. This variable doesn’t add anything to the dataset, but I just need it when I plot the percentage changes, to make the look good.&lt;/p&gt;
&lt;p&gt;With the &lt;code&gt;tidyverse&lt;/code&gt; and &lt;code&gt;ggplot2&lt;/code&gt; you have at least two choices for setting variables on the fly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Right before plotting, in a pipe, as I’m doing here,&lt;/li&gt;
&lt;li&gt;Directly within &lt;code&gt;ggplot2&lt;/code&gt; when you define the aesthetic mapping, as I will do later.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  dat %&amp;gt;% 
  mutate(yend = butter + (percent/10)) %&amp;gt;% 
  ggplot(aes(x = year,
             y = butter))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;At this point I’ve mapped basic aesthetic to the plot, but I did not specify any geometric object to appear, this the plot is empty.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter.consumption_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;add-the-first-geometric-objects&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.2&lt;/span&gt; Add the first geometric objects&lt;/h2&gt;
&lt;p&gt;I’ll start with the grey annotation square, and the text, just because I want them below any other object of the plot.&lt;/p&gt;
&lt;p&gt;Then I add the key geometric elements, &lt;strong&gt;the dots&lt;/strong&gt;, that are mapped to the absolute value of the butter sold in the US (lbs per person) and &lt;strong&gt;the arrows&lt;/strong&gt; that are mapped to the percentage changes.&lt;/p&gt;
&lt;p&gt;Note that you can call &lt;code&gt;aes()&lt;/code&gt; inside a the call for a geometric object, such as &lt;code&gt;geom_point()&lt;/code&gt;. In this way you can map a variable to an aesthetic exclusively in that geometric object.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  p +
  # First the annotations
  annotate(geom = &amp;quot;rect&amp;quot;,
           xmin = 2008, xmax = 2010,
           ymin = -Inf, ymax = Inf,
           fill = &amp;quot;grey80&amp;quot;, alpha = .5) +
  annotate(geom = &amp;quot;text&amp;quot;,
           x = 2009, y = 4,
           label = &amp;quot;2008\nEconomic Crisis?&amp;quot;,
           family = &amp;quot;Arial Narrow&amp;quot;,
           colour = &amp;quot;grey40&amp;quot;,
           size = 3, fontface = &amp;quot;bold&amp;quot;) +
  # and then the basic geometric objects
  geom_segment(aes(yend = yend,
                   xend = ..x..,
                   colour = percent),
               size = 2,
               arrow = arrow(length = unit(1.2, &amp;quot;mm&amp;quot;),
                             type = &amp;quot;closed&amp;quot;)) +
  geom_point(colour = &amp;quot;grey40&amp;quot;, size = 2)

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter.consumption_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;specify-percent-changes-explicitly&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.3&lt;/span&gt; Specify percent changes explicitly&lt;/h2&gt;
&lt;p&gt;We can specify percent changes explicitly with numbers, making it easier for readers to learn the specific size of the effect.&lt;/p&gt;
&lt;p&gt;I’ll do it with &lt;code&gt;geom_text()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The numbers must appear above the arrow, if the percentage change is positive, and below if it is negaitve. We can specify this using &lt;code&gt;case_when()&lt;/code&gt; a vectorized ifelse statement.I specify it directly in the call to the aesthetic mapping.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  p +
  geom_text(aes(y = case_when(percent &amp;gt; 0 ~ yend + .12,
                              TRUE ~ yend - .12),
                label = percent %&amp;gt;% 
                  round() %&amp;gt;% paste0(&amp;quot;%&amp;quot;),
                colour = percent),
            size = 2.7)

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-02-butter.consumption_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colors-colors-colors&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;5.4&lt;/span&gt; Colors colors colors&lt;/h2&gt;
&lt;p&gt;Colors: are they necessary? Are they to be avoided? Well, they make your plot look good, and for sure they are helpful. How can we get the most out of them.&lt;/p&gt;
&lt;p&gt;Beside looking good, a colour palette today must have two properties:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Be colour blind friendly (no need to explain this),&lt;/li&gt;
&lt;li&gt;Be perceptively uniform, or at least perceptively reasonable (i.e. it should not let you guess pattern that are not there in the data).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The concept of perceptively uniform is explained clearly in the &lt;a href=&#34;https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html&#34;&gt;vignette of the viridis package&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Beside the beautiful viridis palette, I also love those in the &lt;a href=&#34;https://www.data-imaginist.com/2018/scico-and-the-colour-conundrum/&#34;&gt;package scico&lt;/a&gt;. This package was developed by &lt;a href=&#34;https://www.data-imaginist.com/&#34;&gt;Thomas Lin Pedersen&lt;/a&gt; and it ports into R the color palettes developed by &lt;a href=&#34;http://www.fabiocrameri.ch/colourmaps.php&#34;&gt;Fabio Crameri&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I use the &lt;code&gt;roma&lt;/code&gt; scale, which is divergent and colorful, and map percent change to it.&lt;/p&gt;
&lt;p&gt;I want the desaturated center of the divergent palette to be mapped to the 0% changes, but percentage data are not equally distributed around zero, so we can do it manually by setting artificial limits to the colot mapping.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# needed to center divergent palette
lim &amp;lt;- 
  dat$percent %&amp;gt;% 
  range() %&amp;gt;% 
  abs() %&amp;gt;% 
  max()


p  +
  scale_colour_scico(palette = &amp;quot;roma&amp;quot;,
                   direction = 1,
                   limits = c(-lim, lim),
                   guide = FALSE) +
  guides(colour = element_blank()) +
  labs(title = &amp;quot;Fluctuations in Butter Consumptions&amp;quot;,
       subtitle = str_wrap(&amp;quot;In the US between 1975 - 2017,
                           with weight of sold butter in lbs 
                           and its percent change compared to
                           the previous year.&amp;quot;),
       y = &amp;quot;Sold Butter in lbs&amp;quot;,
       x = &amp;quot;Year&amp;quot;,
       caption = &amp;quot;Data: USDA | Plot by @othomn&amp;quot;) 
p
# Save --------------------------------------------------------------------

png(filename = &amp;quot;plots/2-05-milk.png&amp;quot;,
    height = 1600, width = 2100,
    res = 300)
p %&amp;gt;% print()
dev.off() &lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>An analysis of Vera institute&#39;s prison dataset</title>
      <link>/post/2-04-prison/</link>
      <pubDate>Fri, 25 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>/post/2-04-prison/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#intro&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; Intro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#a-strategy-for-missing-values-na&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; A strategy for missing values [NA]&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#ignore-the-nas&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; Ignore the NAs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#a-more-solid-strategy&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; A more solid strategy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#which-category-is-overrepresented&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Which Category is Overrepresented?&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#exploratory-plot&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; Exploratory plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#hypergeometric-test&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; Hypergeometric test&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#adjust-plot-for-publication&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; Adjust plot for publication&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#interpretation-and-closing-remarks&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; Interpretation and closing remarks&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;intro&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; Intro&lt;/h1&gt;
&lt;p&gt;This is week 4 of the social data project TidyTuesday. In this week, we explore the incarceration trend dataset. This dataset stores US demographic and incarceration data by county and by gender / ethnic profile for the last 30 years.&lt;/p&gt;
&lt;p&gt;The incarceration trend dataset is kindly provided by the &lt;a href=&#34;https://www.vera.org/&#34;&gt;Vera Institute&lt;/a&gt; on their &lt;a href=&#34;https://github.com/vera-institute/incarceration_trends&#34;&gt;Github page&lt;/a&gt;. Analyzing this dataset aims at remembering of the social injustices still present in our world on Martin Luther King Jr. Day.&lt;/p&gt;
&lt;p&gt;For this analysis, I want to practice modelling rather than data wrangling and tidying, so I decided to start from the file &lt;code&gt;prison_population.csv&lt;/code&gt;, from &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday&#34;&gt;Tidytuesday’s github page&lt;/a&gt; which has already been tidied by Thomas Mock.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Setup -------------------------------------------------------------------
library(tidyverse)
theme_set(theme_bw())&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Get Data ----------------------------------------------------------------

# download data directly from github and store them as Rdata locally.

dat_path &amp;lt;- &amp;quot;_data/2-04-prison.Rdata&amp;quot;
dat_url &amp;lt;- paste0(&amp;quot;https://raw.githubusercontent.com/&amp;quot;,
                  &amp;quot;rfordatascience/tidytuesday/master/data/&amp;quot;,
                  &amp;quot;/2019/2019-01-22/prison_population.csv&amp;quot;)

if(!file.exists(dat_path)) {
  
  dat &amp;lt;- read_csv(dat_url)
  save(dat, file = dat_path)
  
} else {
  load(dat_path)
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;a-strategy-for-missing-values-na&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; A strategy for missing values [NA]&lt;/h1&gt;
&lt;p&gt;Collecting such detailed data is a massive effort, and some missing values are inevitable. For statistical modeling we must select a clear and explicit strategy to deal with measurements that are mixed with missing values.&lt;/p&gt;
&lt;p&gt;The dataset &lt;code&gt;prison_population.csv&lt;/code&gt; has many missing values stored as &lt;code&gt;NA&lt;/code&gt; in the column &lt;code&gt;prison_population&lt;/code&gt;. That column counts incarcerated individuals, and it is our main interest together with the &lt;code&gt;population&lt;/code&gt; columns that stores a full population census.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# how many NAs in the variable prison_population?
dat$prison_population %&amp;gt;% is.na() %&amp;gt;% sum()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 751787&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;ignore-the-nas&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; Ignore the NAs&lt;/h2&gt;
&lt;p&gt;A very basic strategy, could be just to ignore the NAs. We can try to plot a quick summary of prison population by state, using &lt;code&gt;sum(na.rm = TRUE)&lt;/code&gt; to ignore NAs. But this strategy, introduce strange fluctuations in the measurements, because randomly occurring NAs increase or decrease the prison population counts with patterns that are not reflected in reality.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Try sum(na.rm = TRUE) --------------------------------------------------------

# summarize the data by state and year
dat_state &amp;lt;- 
  dat %&amp;gt;% 
  filter(pop_category == &amp;quot;Total&amp;quot;,
         year &amp;gt; 1982, 
         year != 2016) %&amp;gt;% 
  group_by(year, state) %&amp;gt;% 
  summarise(prison_population = prison_population %&amp;gt;% sum(na.rm = TRUE),
            population = population %&amp;gt;% sum(na.rm = TRUE)) 

# plot them as an heatmap
dat_state %&amp;gt;% 
  ggplot(aes(x = year,
             y = state,
             fill = prison_population)) +
  geom_raster() +
  scale_fill_viridis_c(trans = &amp;quot;log10&amp;quot;, breaks = 10^(1:5)) +
  # Do not add padding around x limits
  scale_x_continuous(expand = expand_scale(0))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Transformation introduced infinite values in discrete y-axis&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We can hypothesize that the sharp changes in the &lt;code&gt;prison_population&lt;/code&gt; variable are caused by missing data, rather than by real changes in the population of prisons.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;a-more-solid-strategy&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; A more solid strategy&lt;/h2&gt;
&lt;p&gt;As a more solid strategy to deal with missing values, we can keep only measurements from counties in which the variable &lt;code&gt;prison_population&lt;/code&gt; never has missing values.&lt;/p&gt;
&lt;p&gt;For example, if in a county we did not count the prison population for two years, and we thus have missing values, when we sum the data for those county to the others ignoring NAs, we would notice a sharp increase and decrease in prison population, that is not reflected in reality.&lt;/p&gt;
&lt;p&gt;It is better to remove measurements from that county altogether. In this way we may lose some measurements. But the time series that we retain reflects better the real trends in prison population.&lt;/p&gt;
&lt;p&gt;(If we needed to retain more measurements, we could have tried to impute missing values, but in this case we don’t need to. Because we should have already enough measurements to make insightful observations).&lt;/p&gt;
&lt;p&gt;We can use &lt;code&gt;dplyr&lt;/code&gt; to create the new variable &lt;code&gt;has_na&lt;/code&gt; that is &lt;code&gt;TRUE&lt;/code&gt; if any measurement from that county contains missing values. And then we can use to filter out those observations.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat_clean &amp;lt;- 
  dat %&amp;gt;% 
  filter(pop_category == &amp;quot;Total&amp;quot;,
         # to include more counties, I have reduced the time span
         year &amp;gt;= 1990,
         year != 2016) %&amp;gt;% 
  group_by(state, county_name) %&amp;gt;% 
  mutate(has_na = anyNA(prison_population)) %&amp;gt;% 
  filter(!has_na) %&amp;gt;% 
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s do again the heatmap, but after we have removed counties with missing values.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dat_clean %&amp;gt;% 
  # first summarize data by state and year
  group_by(year, state) %&amp;gt;% 
  summarise(prison_population = sum(prison_population),
            population = sum(population)) %&amp;gt;% 
  # then plot the heatmap
  ggplot(aes(x = year,
             y = state,
             fill = prison_population)) +
  geom_raster() +
  scale_fill_viridis_c(
    # trans = &amp;quot;log10&amp;quot;, breaks = 10^(1:5)
    ) +
  # Do not add padding around x limits
  scale_x_continuous(expand = expand_scale(0))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;(If you compare this heatmap with the one before, you’ll notice that here the colour scale is mapped to a linear scale, rather then a log scale, because in this case the differences are so smooth that they get imperceptible in log scale.)&lt;/p&gt;
&lt;p&gt;Now the progression through time is much smoother.&lt;/p&gt;
&lt;p&gt;As you notice, I have restricted the time span from 1990 to 2015 to retain more counties. Nevertheless, we have lost information about many states.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Which State is missing in the clean dataset?
setdiff(dat$state, dat_clean$state)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;AK&amp;quot; &amp;quot;AZ&amp;quot; &amp;quot;AR&amp;quot; &amp;quot;CT&amp;quot; &amp;quot;DE&amp;quot; &amp;quot;DC&amp;quot; &amp;quot;ID&amp;quot; &amp;quot;IL&amp;quot; &amp;quot;IN&amp;quot; &amp;quot;KS&amp;quot; &amp;quot;LA&amp;quot; &amp;quot;ME&amp;quot; &amp;quot;MA&amp;quot; &amp;quot;MT&amp;quot;
## [15] &amp;quot;NV&amp;quot; &amp;quot;NM&amp;quot; &amp;quot;OH&amp;quot; &amp;quot;OK&amp;quot; &amp;quot;OR&amp;quot; &amp;quot;RI&amp;quot; &amp;quot;SD&amp;quot; &amp;quot;VT&amp;quot; &amp;quot;VA&amp;quot; &amp;quot;WA&amp;quot; &amp;quot;WV&amp;quot; &amp;quot;WI&amp;quot; &amp;quot;WY&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can anyway go on, apply this system to remove NA to the observations split by gender and ethnic categories, and test on that dataset which category is overrepresented in prison population.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;which-category-is-overrepresented&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Which Category is Overrepresented?&lt;/h1&gt;
&lt;p&gt;First, we can clean from missing values the observations that are split by categories.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Try with more details ---------------------------------------------------
by_cat &amp;lt;- 
  dat %&amp;gt;% 
  filter(
    pop_category != &amp;quot;Other&amp;quot;,
    year &amp;gt;= 1990,
    year != 2016) %&amp;gt;% 
  group_by(state, county_name, pop_category) %&amp;gt;% 
  mutate(has_na = anyNA(prison_population)) %&amp;gt;% 
  filter(!has_na) %&amp;gt;% 
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;exploratory-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; Exploratory plot&lt;/h2&gt;
&lt;p&gt;Then we can produce some plots to explore how the various categories behave. In this case I’ve found this boxplot most helpful.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;by_cat %&amp;gt;% 
  mutate(ratio = prison_population/population) %&amp;gt;% 
  ggplot(aes(x = year,
             y = ratio,
             group = year)) +
  geom_boxplot() +
  scale_y_log10() +
  facet_grid(pop_category ~ .,
             scales = &amp;quot;free&amp;quot;,
             # Wrap the text in the strip labels
             labeller = label_wrap_gen(width = 10))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Transformation introduced infinite values in continuous y-axis&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Removed 47965 rows containing non-finite values (stat_boxplot).&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Above, we can observe that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The ratio of African american [Black] incarcerated is higher than any other category, with median around 0.02.&lt;/li&gt;
&lt;li&gt;The ratio of males incarcerated is very high, with median going from 0.01 to 0.02.&lt;/li&gt;
&lt;li&gt;The ratio of &lt;code&gt;Latino&lt;/code&gt; and &lt;code&gt;Native American&lt;/code&gt; incarcerated are also high.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Just to be sure, we can also reproduce the same heatmap as above on all categories.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;by_cat %&amp;gt;% 
  mutate(ratio = prison_population/population) %&amp;gt;% 
  ggplot(aes(x = year,
             y = state,
             fill = prison_population)) +
  geom_raster() +
  facet_grid(. ~ pop_category) +
  scale_fill_viridis_c(trans = &amp;quot;log10&amp;quot;, breaks = 10^c(1:5)) +
  # because of facetting, the x axis is very tight
  theme(axis.text.x = element_text(angle = 90, vjust = .5))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Transformation introduced infinite values in discrete y-axis&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We can see that data are still sparse, but importantly, for each year/category we have sets of paired observation of &lt;code&gt;prison_population&lt;/code&gt; and &lt;code&gt;population&lt;/code&gt; without missing values.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;hypergeometric-test&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; Hypergeometric test&lt;/h2&gt;
&lt;p&gt;We can model this data with an &lt;a href=&#34;https://stattrek.com/probability-distributions/hypergeometric.aspx&#34;&gt;hypergeometric distribution&lt;/a&gt;, and use it to test if a category of gender or ethnicity is overrepresented.&lt;/p&gt;
&lt;p&gt;First, we can (again) summarize observation by state and year (we don’t want to test over-representation for every county).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;by_cat_sum &amp;lt;- 
  by_cat %&amp;gt;% 
  filter(pop_category != &amp;quot;Other&amp;quot;) %&amp;gt;% 
  group_by(pop_category, year) %&amp;gt;% 
  summarise(population = sum(population),
            prison_population = sum(prison_population)) %&amp;gt;% 
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then we have to prepare the data for the function &lt;code&gt;phyper()&lt;/code&gt; that will estimate the p-value of each observation under the hypergeometric distribution.&lt;/p&gt;
&lt;p&gt;As state by its help page, the &lt;code&gt;phyper()&lt;/code&gt; function requires these parameters:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;q: vector of quantiles representing the number of white balls drawn without replacement from an urn which contains both black and white balls.&lt;/li&gt;
&lt;li&gt;m: the number of white balls in the urn.&lt;/li&gt;
&lt;li&gt;n: the number of black balls in the urn.&lt;/li&gt;
&lt;li&gt;k: the number of balls drawn from the urn.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;From the help pages of the &lt;a href=&#34;https://stat.ethz.ch/R-manual/R-devel/library/stats/html/00Index.html&#34;&gt;stats package&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;We can reshape the dataset and place each of those values in a separate column. If we call each column as the appropriate parameter of the function &lt;code&gt;phyper()&lt;/code&gt;, then we loop this function on each row of the dataset with &lt;a href=&#34;https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments&#34;&gt;&lt;code&gt;pmap()&lt;/code&gt;&lt;/a&gt; and match all arguments automatically by name.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# prepare a table for hyopergeometric test:
# get category total next to each other category

by_cat_tot &amp;lt;- 
  by_cat_sum %&amp;gt;% 
  filter(pop_category == &amp;quot;Total&amp;quot;) %&amp;gt;% 
  rename_all(funs(paste0(., &amp;quot;_total&amp;quot;)))

by_cat_hyp &amp;lt;- 
  by_cat_sum %&amp;gt;% 
  left_join(by_cat_tot, by = c(&amp;quot;year&amp;quot; = &amp;quot;year_total&amp;quot;))

# apply phyper() using pmap

# Define phyper() wrapper that contains &amp;quot;...&amp;quot;
# So that it can be used in pmap with extra variables
# Test enrichment
# inspired from
# https://github.com/GuangchuangYu/DOSE/blob/master/R/enricher_internal.R

phyper2 &amp;lt;- function(q, m, n, k, ...) {
  phyper(q, m, n, k, log.p = TRUE, lower.tail = FALSE)
  }

by_cat_hyp &amp;lt;- 
  by_cat_hyp %&amp;gt;% 
  # rename arguments for dhyper
  transmute(year = year,
            pop_category = pop_category,
            q = prison_population, # white balls drawn
            # x = prison_population, # white balls drawn
            m = population, # white balls in the urn
            n = population_total - population, # black balls in the urn
            k = prison_population_total) # balls drawn from the urn&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This approach was inspired by the field of genomics and transcriptomics, in which the hypergeometric test is often used to test the if structural or functional categories of genes are enriched in a given set. Some code here is inspired by &lt;a href=&#34;https://github.com/GuangchuangYu/DOSE/blob/master/R/enricher_internal.R&#34;&gt;this bioconductor package&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then we can use &lt;a href=&#34;https://r4ds.had.co.nz/iteration.html#mapping-over-multiple-arguments&#34;&gt;pmap()&lt;/a&gt; to run an hypergeometric test on each row.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# apply dhyper() to every row
by_cat_hyp &amp;lt;- 
  by_cat_hyp %&amp;gt;% 
  mutate(log_p = pmap(., .f = phyper2) %&amp;gt;% purrr::flatten_dbl())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And eventually we can plot the log p-values with inverse sign, to make the plot more intuitive.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p &amp;lt;- 
  by_cat_hyp %&amp;gt;% 
  # I could have filtered out this earlier,
  # but it served as practical control
  filter(pop_category != &amp;quot;Total&amp;quot;) %&amp;gt;% 
  # filter categories not overepresented
  filter(log_p &amp;lt; -100) %&amp;gt;% 
  ggplot(aes(x = year,
             y = -log_p)) +
  geom_bar(stat = &amp;quot;identity&amp;quot;,
           fill = &amp;quot;orange&amp;quot;,
           colour = &amp;quot;black&amp;quot;) +
  facet_grid(pop_category ~ .) 

p %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-14-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We can see that the categories “Black” and “Male” are far from what we would expect by chance, and, thus, members of that categories are overrepresented.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;adjust-plot-for-publication&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; Adjust plot for publication&lt;/h1&gt;
&lt;p&gt;We can adjust the plot labels for publication. Adding clearer labels, a title, and making small adjustments to the layout.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p2 &amp;lt;- 
  p +
  labs(title = &amp;quot;Categories that are Overrepresented in US Prisons&amp;quot;,
       subtitle = str_wrap(&amp;quot;A quick exploratory analysis of 
                           the VERA dataset, using a hypergeometric
                           test to estimate which category is more 
                           represented than expected&amp;quot;), width = 27,
       y = &amp;quot;-log(p-value)&amp;quot;,
       x = &amp;quot;Year&amp;quot;,
       caption = &amp;quot;Source: www.vera.org | Plot by @othomn&amp;quot;) +
  theme(text = element_text(family = &amp;quot;Arial Narrow&amp;quot;,
                            colour = &amp;quot;grey40&amp;quot;,
                            size = 11),
        axis.title = element_text(size = 14),
        strip.text = element_text(colour = &amp;quot;grey20&amp;quot;,
                                  size = 14),
        plot.title = element_text(colour = &amp;quot;grey20&amp;quot;,
                                  face = &amp;quot;bold&amp;quot;,
                                  size = 18),
        plot.subtitle = element_text(face = &amp;quot;bold&amp;quot;,
                                     size = 12),
        aspect.ratio = .2,   
        plot.margin = margin(t = 10, r = 10, b = 0, l = 3,
                             unit = &amp;quot;mm&amp;quot;))

p2 %&amp;gt;% print()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2-04-prison_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;interpretation-and-closing-remarks&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; Interpretation and closing remarks&lt;/h1&gt;
&lt;p&gt;This is a quick analysis and my take on &lt;a href=&#34;https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-01-22&#34;&gt;Tidytuesday week 4 dataset&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My analysis shows an issue that is widely known, that African American are overrepresented in US prisons. But this just a statistical analysis, which could be helpful or misleading if not contextualized. If you have any suggestion on how to improve my analysis, please contact me.&lt;/p&gt;
&lt;p&gt;Unfortunately, in here I don’t contextualize and I don’t discuss this results. If you are interested in this topic, if you feel engaged by these results, and you want to know more. If you want to interpret this data, you’ll have to contextualize this results. To do so, you’ll have to read about history and social issues! And if you are interested and you want to form an opinion, please, please, please, do read, explore and contextualize.&lt;/p&gt;
&lt;p&gt;Many thanks to Thomas Mock for bringing the work of the Vera institute to our attention on Martin Luther King Jr. Day.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>PTRAPR</title>
      <link>/project/ptrapr/</link>
      <pubDate>Mon, 10 Dec 2018 00:00:00 +0100</pubDate>
      
      <guid>/project/ptrapr/</guid>
      <description>&lt;p&gt;An R package to analyze Rice panicle architecture.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Homology-directed repair of a defective glabrous gene in Arabidopsis with Cas9-based gene targeting</title>
      <link>/publication/hahn-2018-homology/</link>
      <pubDate>Mon, 01 Jan 2018 00:00:00 +0100</pubDate>
      
      <guid>/publication/hahn-2018-homology/</guid>
      <description></description>
    </item>
    
    <item>
      <title>What does the plant do?</title>
      <link>/project/ps-booklet/</link>
      <pubDate>Tue, 01 Aug 2017 00:00:00 +0200</pubDate>
      
      <guid>/project/ps-booklet/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Back To The Books</title>
      <link>/post/2017-07-16-back-to-the-books/</link>
      <pubDate>Sun, 16 Jul 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/2017-07-16-back-to-the-books/</guid>
      <description>

&lt;div id=&#34;TOC&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#back-to-the-books&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;1&lt;/span&gt; Back To The Books&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#tools-for-writing-open-books-on-github&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2&lt;/span&gt; Tools For Writing Open Books on Github&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#markdown&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.1&lt;/span&gt; Markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#git-and-github&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.2&lt;/span&gt; Git and Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#putting-it-together-books-authorship-and-contributions&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.3&lt;/span&gt; Putting it together: Books, authorship and contributions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#bonus-bookdown&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;2.4&lt;/span&gt; Bonus: Bookdown&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#publishing&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3&lt;/span&gt; Publishing&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#own-website&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.1&lt;/span&gt; Own website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#rstudio-connect-through-bookdown&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.2&lt;/span&gt; Rstudio connect, through Bookdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#publishers&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;3.3&lt;/span&gt; Publishers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#impact&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4&lt;/span&gt; Impact&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#paywall&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.1&lt;/span&gt; Paywall&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#updates-and-crowdsourcing&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;4.2&lt;/span&gt; Updates and crowdsourcing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#wrapping-it-up-and-whats-next&#34;&gt;&lt;span class=&#34;toc-section-number&#34;&gt;5&lt;/span&gt; Wrapping it up and what’s next&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div id=&#34;back-to-the-books&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;1&lt;/span&gt; Back To The Books&lt;/h1&gt;
&lt;p&gt;Toward the end of my PhD I was struggling to learn new skills such as data analysis and programming. It was at that time that I rediscovered books (duh!) and discovered a very special kind of them, known as &lt;strong&gt;open books&lt;/strong&gt; or &lt;strong&gt;open source books&lt;/strong&gt;. This kind of books helped me in my professional development, so I feel particularly attached to them.&lt;/p&gt;
&lt;p&gt;By now I have found three types of open source books:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Books that are simply distributed by the author on their own website.&lt;/li&gt;
&lt;li&gt;Books that are written through wikis, known as &lt;strong&gt;wikibooks&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Books that are written through &lt;strong&gt;Github&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Here I will discuss the last type, because I have the impression that Github is a powerful tool for writing books that also fits perfectly to academics.&lt;/p&gt;
&lt;p&gt;A disclaimer first: I come here as a beginner. My area of expertise is biology and I have never written a book about it, but I would really like to do so. Meanwhile I collected the necessary tools and some idea on why we should do it. And I would like to share them with you.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;tools-for-writing-open-books-on-github&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;2&lt;/span&gt; Tools For Writing Open Books on Github&lt;/h1&gt;
&lt;p&gt;It all revolves around two tools: Markdown and, you have guessed it, Github.&lt;/p&gt;
&lt;div id=&#34;markdown&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.1&lt;/span&gt; Markdown&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://daringfireball.net/projects/markdown/&#34;&gt;Markdown&lt;/a&gt; is a simple markup language; we can use it for annotating plain text, so that we know which part is the title, which part should be bold or italic, which part makes up paragraph, etc.&lt;/p&gt;
&lt;p&gt;The most widely used markup languages are HTML and LATEX. Compared to them markdown is less versatile, but incredibly simple and easy to use.&lt;/p&gt;
&lt;p&gt;For example, in markdown:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# This is a title

## This is a subtitle

This is a paragraph.

This text is **bold**, and this text is *italic*

This is a bullet list:

- item1
- item2

[This is a link](to/your/favourite/URL)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;etc.&lt;/p&gt;
&lt;p&gt;A big chunk of the web, for example this blog and many others, is written in Markdown.&lt;/p&gt;
&lt;p&gt;Once you have written markdown text what can you do with it?&lt;/p&gt;
&lt;p&gt;Markdown is a &lt;strong&gt;universal source&lt;/strong&gt; that can be easily converted into nicely formatted &lt;strong&gt;docx&lt;/strong&gt; and &lt;strong&gt;pdf&lt;/strong&gt;, but also into &lt;strong&gt;HTML&lt;/strong&gt; and &lt;strong&gt;epub/mobi&lt;/strong&gt;. You can convert any markdown file into any of those formats with &lt;strong&gt;&lt;a href=&#34;https://pandoc.org/&#34;&gt;pandoc&lt;/a&gt;&lt;/strong&gt; , no edits required.&lt;/p&gt;
&lt;p&gt;Since a markdown file is plain text, you can open it on any computer and any platform, you just need a text editor (I generally use &lt;a href=&#34;https://atom.io/&#34;&gt;atom&lt;/a&gt;). It is not even worth mentioning that pandoc and atom are open source.&lt;/p&gt;
&lt;p&gt;Also, since markdown is plain text, it can be tracked with &lt;a href=&#34;https://git-scm.com/&#34;&gt;Git&lt;/a&gt; and hosted on &lt;a href=&#34;https://github.com/&#34;&gt;Github&lt;/a&gt;. (if you already know what they are, skip the next section)&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;git-and-github&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.2&lt;/span&gt; Git and Github&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://git-scm.com/&#34;&gt;Git&lt;/a&gt; is a version control software. It was designed for software developers that need to keep track of what they write and delete while they develop their software; and also to collaborate while doing this. Git is a tool that is somehow complementary to a backup, it keeps track of changes to specific files on a project-wise schedule.&lt;/p&gt;
&lt;p&gt;By tracking the modifications to a file, &lt;strong&gt;Git assigns exact authorship to each line&lt;/strong&gt; of such file. So Git, plus &lt;strong&gt;its online hub &lt;a href=&#34;https://github.com/&#34;&gt;Github&lt;/a&gt;&lt;/strong&gt; allows you to publish, update and track any modification (and authorship of those modifications) of files, online and in an open way. This features make Git a great tool for &lt;strong&gt;open but controlled collaboration&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Since the source code of programs is indeed text, Git works perfectly also for writing books (and blog, websites, manual etc.), as long as they are written in plain text formats, such as markdown.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;putting-it-together-books-authorship-and-contributions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3&lt;/span&gt; Putting it together: Books, authorship and contributions&lt;/h2&gt;
&lt;p&gt;A combination of Markdown (universal source) and Github (publish, author, track and collaborate) is great for publishing open source books. Many academics such as &lt;a href=&#34;http://hadley.nz/&#34;&gt;Hadley Wickham&lt;/a&gt; are already using it.&lt;/p&gt;
&lt;div id=&#34;authorship-and-contributions&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.3.1&lt;/span&gt; Authorship and contributions&lt;/h3&gt;
&lt;p&gt;We academics care a great deal that our work gets accredited to us, and only because we are proud of it: this is very important for us in order to keep our job or to the next one. So, I would like to take &lt;a href=&#34;http://adv-r.had.co.nz/&#34;&gt;one of Hadley Wickham’s books&lt;/a&gt; as example to discuss authorship and contributions.&lt;/p&gt;
&lt;p&gt;As you can see, this book is &lt;a href=&#34;https://github.com/hadley/adv-r&#34;&gt;tracked on Github&lt;/a&gt;. Github does not only tracks and keeps records of any file that constitute the book, it also keeps records of the &lt;a href=&#34;https://github.com/hadley/adv-r/graphs/contributors&#34;&gt;authorship of every line of those files&lt;/a&gt;. As you can see, Hadley Wickham authored most of the book himself, but many other people provided small contribution. For every contributor, you can tell exactly what they wrote or deleted in the various files that constitute the source for that book. What you can’t see is that each of these contribution had to be approved from the main author.&lt;/p&gt;
&lt;p&gt;So, a combination of markdown and Github allows you to self publish your own books. Moreover, this system provides strong authoring tools: anybody can propose changes / contributions to your book, and every contribution must be approved by you (or by any of the authors that have such privilege).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Be aware, since your book now is an open source project, it can be &lt;a href=&#34;https://www.quora.com/What-does-it-mean-to-fork-on-GitHub&#34;&gt;forked&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;bonus-bookdown&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;2.4&lt;/span&gt; Bonus: Bookdown&lt;/h2&gt;
&lt;p&gt;An experienced user can rely on its own skills to convert all the markdown files that constitute a book into a nicely formatted web page, the good news is that we don’t have to do this by ourself: instead we can use &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;Bookdown&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.rstudio.com/resources/webinars/introducing-bookdown/&#34;&gt;Bookdown is an R package&lt;/a&gt; that renders markdown books into HTML pages and many other formats. &lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;Bookdown’s manual&lt;/a&gt; is written in Bookdown itself, so you can peek how the rendering looks like. Since Bookdown is written in &lt;a href=&#34;https://en.wikipedia.org/wiki/R_(programming_language)&#34;&gt;R&lt;/a&gt;, it is most widely known to the R community. Indeed &lt;a href=&#34;https://bookdown.org/&#34;&gt;most of the book written in Bookdown&lt;/a&gt; are about R, but they don’t need to, using Bookdown requires very little knowledge of R.&lt;/p&gt;
&lt;p&gt;Another powerful tool is &lt;a href=&#34;https://www.gitbook.com/&#34;&gt;Gitbook&lt;/a&gt;, it was used to author &lt;a href=&#34;https://www.gitbook.com/explore&#34;&gt;this collection of technical books&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;publishing&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;3&lt;/span&gt; Publishing&lt;/h1&gt;
&lt;p&gt;Open source books can be published in many ways, often one way does not exclude the others.&lt;/p&gt;
&lt;div id=&#34;own-website&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.1&lt;/span&gt; Own website&lt;/h2&gt;
&lt;p&gt;Markdown and Pandoc provide an HTML output, so your book can be easily integrated into any website, manually or automatically. For example, &lt;a href=&#34;https://travis-ci.org/&#34;&gt;travis-ci&lt;/a&gt; can build your book automatically from Github and push it to your website; but I have not checked the details of how to do this, and setting this up might not be easy.&lt;/p&gt;
&lt;p&gt;In this way, you fully control the copyright and the license to your book (although it is reasonable to use Github together with open source or &lt;a href=&#34;https://creativecommons.org/share-your-work/&#34;&gt;share-alike&lt;/a&gt; licenses).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;rstudio-connect-through-bookdown&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.2&lt;/span&gt; Rstudio connect, through Bookdown&lt;/h2&gt;
&lt;p&gt;Bookdown provides &lt;a href=&#34;https://bookdown.org/yihui/bookdown/rstudio-connect.html&#34;&gt;an integrated system to publish your book&lt;/a&gt; through Rstudio connect to &lt;a href=&#34;https://bookdown.org&#34;&gt;its website&lt;/a&gt;. This is detailed on &lt;a href=&#34;https://bookdown.org/yihui/bookdown/publishing.html&#34;&gt;the “Publishing” chapter of bookdown’s manual&lt;/a&gt; together with other extensive information on publishing.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;publishers&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;3.3&lt;/span&gt; Publishers&lt;/h2&gt;
&lt;p&gt;It is also possible to sell open source books through publishers. Among those &lt;a href=&#34;https://leanpub.com/&#34;&gt;Leanpub&lt;/a&gt; does a good job, I personally purchased books there. Leanpub accepts to sell open source books written in markdown directly from Github. Their publishing process is fast; indeed they accept to distribute your book in real time while you write it, providing updates at anytime to the customers.&lt;/p&gt;
&lt;p&gt;Most of the books on Leanpub are about programming, but it does not have to be like this, we could publish there books on biology, or about any of your fields of interest.&lt;/p&gt;
&lt;p&gt;If your open source book is incredibly good, you can also sell printed versions through traditional publishers. Indeed Hadley Wickham &lt;a href=&#34;https://www.amazon.com/dp/1466586966/&#34;&gt;sells his books through Chapman &amp;amp; Hall&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;impact&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;4&lt;/span&gt; Impact&lt;/h1&gt;
&lt;p&gt;A small note: I haven’t written or published an open source book yet; I wrote this section starting from my personal observations and experience while studying and working in academia in the last years.&lt;/p&gt;
&lt;div id=&#34;paywall&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.1&lt;/span&gt; Paywall&lt;/h2&gt;
&lt;p&gt;We scientists often complain about how people don’t rely on the knowledge that we produce during years. But how much of this knowledge is locked behind a paywall that has questionable reasons to exist? Writing open source books, at least while we are funded with public money, could have an ethical side.&lt;/p&gt;
&lt;p&gt;What about the practical side? We academics do not earn huge amounts of money for writing books that are often sold at high prices. If we would distribute open source books instead, we would not lose much. And we could gain on impact: an open source book can be accessed worldwide, and it could be also easily translated.&lt;/p&gt;
&lt;p&gt;Beside, remember that open source books can always be sold through &lt;a href=&#34;https://leanpub.com/&#34;&gt;Leanpub&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;updates-and-crowdsourcing&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;&lt;span class=&#34;header-section-number&#34;&gt;4.2&lt;/span&gt; Updates and crowdsourcing&lt;/h2&gt;
&lt;p&gt;Imagine the impact of a book that can be freely:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;accessed online&lt;/li&gt;
&lt;li&gt;downloaded on a e-reader&lt;/li&gt;
&lt;li&gt;printed&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And that can also be updated in real time. When we specialize we sometimes feel that books gets useless because they quickly become obsolete. Well, open source books do not.&lt;/p&gt;
&lt;p&gt;Moreover they are less of a burden on the author, because readers can contribute to the book and improve it, from fixing typos to writing whole sections. For example, the author of Bookdown, (&lt;a href=&#34;https://yihui.name/&#34;&gt;Yihui Xie&lt;/a&gt;), is also &lt;a href=&#34;https://github.com/rstudio/blogdown&#34;&gt;writing an R package to make website&lt;/a&gt; (that, by the way, I am using to make this blog). The &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;manual for this new package&lt;/a&gt; is being written with Bookdown and &lt;a href=&#34;https://github.com/rstudio/blogdown/commits/master/docs&#34;&gt;many people are already contributing to it&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;What better peer review than the readers themselves?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;wrapping-it-up-and-whats-next&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;&lt;span class=&#34;header-section-number&#34;&gt;5&lt;/span&gt; Wrapping it up and what’s next&lt;/h1&gt;
&lt;p&gt;Markdown and Github are powerful tools to publish open source books. Markdown books can be easily compiled to very nicely formatted HTML books using packages such as Bookdown. Github enables open but controlled collaboration and provides strong authorship tools.&lt;/p&gt;
&lt;p&gt;With this system we could publish beginner-level books or also short high level reference books on the our topics of interest. Our readers could be University students or any person that want to learn such topics.&lt;/p&gt;
&lt;p&gt;If academics would engage in this activity they could have a great impact on society.&lt;/p&gt;
&lt;p&gt;I don’t know if I am expert enough to write an open source book on any of my area of interest. But it sounds like a good long term project and I look forward to do it. The tools are all there.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Fill the Gap</title>
      <link>/post/2017-05-26-fill-the-gap/</link>
      <pubDate>Fri, 26 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/2017-05-26-fill-the-gap/</guid>
      <description>


&lt;p&gt;Can &lt;strong&gt;Open Source Hardware&lt;/strong&gt; help fill the gap and bring technology within reach for everybody?&lt;/p&gt;
&lt;p&gt;I am a biologist in academia. I am curious about how Open Source Hardware can improve the way we do research and the way in which we distribute our results and the technology that we produce.&lt;/p&gt;
&lt;div id=&#34;definitions-first&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Definitions first&lt;/h1&gt;
&lt;p&gt;The &lt;a href=&#34;https://www.oshwa.org&#34;&gt;Open Source Hardware Association&lt;/a&gt; defines Open Source Hardware as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“hardware whose design is made publicly available so that anyone can study, modify, distribute, make, and sell the design or hardware based on that design”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Starting from the late 90s many engineers, passionate users, companies and organization have tried to define standards for Open Source Hardware and to advertise for it, they were probably inspired by the success of Open Source Software.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;lessons-from-software&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Lessons from Software&lt;/h1&gt;
&lt;p&gt;A couple of decades ago, the &lt;strong&gt;Open Source&lt;/strong&gt; movement made a strong statement on how the source code of commonly used software should be available to everybody.&lt;/p&gt;
&lt;p&gt;This was a matter of &lt;strong&gt;fairness&lt;/strong&gt;. We deal with software constantly in our life and it sounds reasonable that we know how that software works.&lt;/p&gt;
&lt;p&gt;But this proved also &lt;strong&gt;practical&lt;/strong&gt;. It fueled software development in the last decades and the broad start-up environment that thrived around it.&lt;/p&gt;
&lt;p&gt;It is worth mentioning that sharing the source code is good enough, but many open source projects went further than that. They provided &lt;strong&gt;extensive and sometimes redundant documentation&lt;/strong&gt; on how to use their product, on how to take control of it and on how to modify any aspect of it. Then, the community could redistribute the modified and improved products thanks to &lt;strong&gt;permissive&lt;/strong&gt; and &lt;strong&gt;copyleft&lt;/strong&gt; licenses.&lt;/p&gt;
&lt;p&gt;The success of this model highlights the &lt;strong&gt;benefits that arise from a widespread and distributed access to knowledge&lt;/strong&gt; for everybody.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;in-universities-and-in-biology&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;In Universities and in biology&lt;/h1&gt;
&lt;p&gt;Through &lt;strong&gt;synthetic biology&lt;/strong&gt;, open source hardware is already making its way to biology and biotechnology.&lt;/p&gt;
&lt;p&gt;I am trying to collect a &lt;a href=&#34;https://othomantegazza.github.io/open-hardware-bio.html&#34;&gt;list of projects&lt;/a&gt; that are related to Open Source Hardware and Biology and looking at homemade centrifuges, open PCR machines, microfluidics devices, I have the impression that this way of doing things is rapidly growing.&lt;/p&gt;
&lt;p&gt;As stated above, I am interested in its role and impact on academic research, specifically in the fields of biology and plant science. (and eventually I would like to use those tools myself for my research :) )&lt;/p&gt;
&lt;div id=&#34;redistributing-knowledge&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Redistributing knowledge&lt;/h2&gt;
&lt;p&gt;By definition &lt;strong&gt;Open Source&lt;/strong&gt; software and hardware are about how we distribute knowledge.&lt;/p&gt;
&lt;p&gt;A model that stresses the importance of &lt;strong&gt;openly redistributing knowledge as widely as possible&lt;/strong&gt; and of &lt;strong&gt;facilitating re-use of that knowledge / technology&lt;/strong&gt; seems only reasonable for &lt;strong&gt;Universities&lt;/strong&gt;, which indeed have the &lt;strong&gt;role in society&lt;/strong&gt; of generating knowledge and making it available.&lt;/p&gt;
&lt;p&gt;What I am also really curious about is to figure out if Open Source Hardware could also improve the way we do research and not exclusively the way we distribute it.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;making-research-easier-for-academics&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Making research easier for academics&lt;/h2&gt;
&lt;p&gt;In my (small) experience as academic researcher, one of the main issues that we, young biologists, face is that we are mostly &lt;strong&gt;end users&lt;/strong&gt; of very expensive and sophisticated machines and technologies.&lt;/p&gt;
&lt;p&gt;In this way, we can perform very complex tasks and experiments with relatively little effort, but we also partially lose control on what we are doing.&lt;/p&gt;
&lt;p&gt;In details, this might cause that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Laboratories depend more and more on &lt;strong&gt;high level funding&lt;/strong&gt;; low funded labs get left behind, which could be an issue on the global scale. Since the end user model is productive in the short term, laboratories that try different approaches, again, might get left behind,&lt;/li&gt;
&lt;li&gt;This relegates researchers to a &lt;strong&gt;performer / technical&lt;/strong&gt; position, in which they are required to perform a high number of repetitive tasks with little chances to modify the workflows of their experiments. If researchers would gain more control on the technology that they use, they might have bigger chances of optimizing their experimental workflows. For example, making them simpler, less polluting and more accessible.&lt;/li&gt;
&lt;li&gt;This might have an effect also on &lt;strong&gt;reproducibility&lt;/strong&gt; and distributed collaborative development, simply because the chances of making reproducible something on which you have no control are small.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Open Source Hardware might have a role solving those issues but since only few laboratories implement open hardware methodically I can’t be sure about it.&lt;/p&gt;
&lt;p&gt;But open source software already helped biologist a lot, especially in bioinformatics and in data analysis through impressive frameworks such as, for example, &lt;a href=&#34;http://bioconductor.org/&#34;&gt;BioConductor&lt;/a&gt;. This raises hopes that Open Source Hardware could have a similar impact for wet lab scientists.&lt;/p&gt;
&lt;p&gt;Of course the issue of a &lt;a href=&#34;https://simplystatistics.org/2016/02/16/when-it-comes-to-science-its-the-economy-stupid/&#34;&gt;funding system that might encourage bad scientific behavior&lt;/a&gt; remains, but Open Hardware could be a move in the right direction and improve the life of young biologists.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;an-impact-on-farming&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;An Impact on farming?&lt;/h1&gt;
&lt;p&gt;As academic researcher I often wonder what will be the impact of my research.&lt;/p&gt;
&lt;p&gt;I am specialized in genetics and plant biology, so my research might have impact on agriculture and farming, especially in breeding new crop varieties.&lt;/p&gt;
&lt;p&gt;If we, plant biologists, would apply Open Source Hardware systematically, we might, for example, improve farming by &lt;strong&gt;lowering the costs&lt;/strong&gt; necessary to access technologies such as plant breeding.&lt;/p&gt;
&lt;p&gt;So, can &lt;strong&gt;Academic Research improve its impact&lt;/strong&gt;, down the line, on farming by adopting an &lt;strong&gt;open knowledge / open source software and hardware model&lt;/strong&gt;? And also, could it help shift the role of a farmer from &lt;strong&gt;end user&lt;/strong&gt; to &lt;strong&gt;user/developer&lt;/strong&gt;?&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://greenwave.org/&#34;&gt;Some organizations&lt;/a&gt; are already investing on this model. I am moving a little bit outside of my field of expertise right here, so I might not be the best person to answer those questions; but as always, the success of Open Source Software raises hope that yes, this can happen.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;em&gt;Thanks to Silvia, Leone and Alessandro for the help and the ideas.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Enabling Tools</title>
      <link>/post/2017-05-16-enabling-tools/</link>
      <pubDate>Tue, 16 May 2017 00:00:00 +0000</pubDate>
      
      <guid>/post/2017-05-16-enabling-tools/</guid>
      <description>&lt;p&gt;As a young scientist, I find myself facing these challenges (or, at least,
let&amp;rsquo;s say that I am trying to improve in these areas):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;make research in an &lt;strong&gt;interdisciplinary&lt;/strong&gt; and &lt;strong&gt;distributed&lt;/strong&gt; context,&lt;/li&gt;
&lt;li&gt;maximize the chances that anybody can &lt;strong&gt;access&lt;/strong&gt; and &lt;strong&gt;reproduce&lt;/strong&gt; my results,&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;engage&lt;/strong&gt; with the wide public.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Learning these &lt;strong&gt;enabling tools&lt;/strong&gt; are helping me dealing with this:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A &lt;strong&gt;programming language&lt;/strong&gt;, easier if it is a high level one such as R or Python. Knowing a programming language not only helps you get a computer or a robot do what you want. It also allow you to write and share with everybody a rigorous set of instruction (scripts) for what you do,&lt;/li&gt;
&lt;li&gt;A &lt;strong&gt;markup language&lt;/strong&gt;, such as Latex, or a combination of HTML and markdown, this enables you to easily publish what you want on the web. It can be a blog, a text book, or an extensive manual on how to interpret and use your lab results,&lt;/li&gt;
&lt;li&gt;A &lt;strong&gt;version control&lt;/strong&gt; tool; Git/Github. It allows open and collaborative development of your projects,&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The nice things about these tools is that they have been developed in an &lt;strong&gt;open
source&lt;/strong&gt; / &lt;strong&gt;open knowledge&lt;/strong&gt; framework, therefore the only thing needed to
learn them (besides a computer, access to the web and -OK- understanding of basic English) is time.&lt;/p&gt;

&lt;p&gt;These technologies already had an impact on academic research once, with
the advent of &amp;ldquo;big data&amp;rdquo;. They might have an impact again at the present day with the implementation of open hardware and open robotics.&lt;/p&gt;

&lt;p&gt;While learning those tools, I found these resources incredibly helpful :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;For the &lt;strong&gt;R language&lt;/strong&gt; anything that &lt;a href=&#34;http://hadley.nz/&#34; target=&#34;_blank&#34;&gt;Hadley Wickham&lt;/a&gt; does,&lt;/li&gt;
&lt;li&gt;The &lt;a href=&#34;https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web&#34; target=&#34;_blank&#34;&gt;Mozilla Development Network&lt;/a&gt; gets you started with &lt;strong&gt;HTML&lt;/strong&gt; and the web (I am still learning this)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Markdown&lt;/strong&gt; is just incredibly easy, just check the &lt;a href=&#34;http://daringfireball.net/projects/markdown/&#34; target=&#34;_blank&#34;&gt;original guide&lt;/a&gt; or the &lt;a href=&#34;https://guides.github.com/features/mastering-markdown/&#34; target=&#34;_blank&#34;&gt;Github Flavored Markdown guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;What better place to get started with github then the &lt;a href=&#34;https://git-scm.com/book/en/v2&#34; target=&#34;_blank&#34;&gt;Git Book&lt;/a&gt; itself? It&amp;rsquo;s at the same time easy and detailed.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I have not found yet the best guide for learning open hardware development.&lt;/p&gt;

&lt;p&gt;Have fun :)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>An efficient visual screen for CRISPR/Cas9 activity in Arabidopsis thaliana</title>
      <link>/publication/hahn-2017-efficient/</link>
      <pubDate>Sun, 01 Jan 2017 00:00:00 +0100</pubDate>
      
      <guid>/publication/hahn-2017-efficient/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Generation of Targeted Knockout Mutants in Arabidopsis thaliana Using CRISPR/Cas9</title>
      <link>/publication/hahn-2017-generation/</link>
      <pubDate>Sun, 01 Jan 2017 00:00:00 +0100</pubDate>
      
      <guid>/publication/hahn-2017-generation/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Surveying the oligomeric state of Arabidopsis thaliana chloroplasts</title>
      <link>/publication/lundquist-2017-surveying/</link>
      <pubDate>Sun, 01 Jan 2017 00:00:00 +0100</pubDate>
      
      <guid>/publication/lundquist-2017-surveying/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Engineering C4 photosynthesis into C3 chassis in the synthetic biology age</title>
      <link>/publication/schuler-2016-engineering/</link>
      <pubDate>Fri, 01 Jan 2016 00:00:00 +0100</pubDate>
      
      <guid>/publication/schuler-2016-engineering/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Analysis of the arabidopsis REM gene family predicts functions during flower development</title>
      <link>/publication/mantegazza-2014-analysis/</link>
      <pubDate>Wed, 01 Jan 2014 00:00:00 +0100</pubDate>
      
      <guid>/publication/mantegazza-2014-analysis/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Gene coexpression patterns during early development of the native Arabidopsis reproductive meristem: novel candidate developmental regulators and patterns of functional redundancy</title>
      <link>/publication/mantegazza-2014-gene/</link>
      <pubDate>Wed, 01 Jan 2014 00:00:00 +0100</pubDate>
      
      <guid>/publication/mantegazza-2014-gene/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
